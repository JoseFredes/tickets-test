generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider          = "postgresql"
  url               = env("POSTGRES_PRISMA_URL")
  directUrl         = env("POSTGRES_URL_NON_POOLING")
  shadowDatabaseUrl = env("POSTGRES_URL_NON_POOLING")
}

model User {
  id                 Int      @id @default(autoincrement())
  email              String   @unique
  name               String?
  createdAt          DateTime @default(now())
  updatedAt          DateTime @updatedAt
  authoredTickets    Ticket[] @relation("TicketAuthor")
  responsibleTickets Ticket[] @relation("TicketResponsible")
}

model Ticket {
  id            Int       @id @default(autoincrement())
  title         String
  description   String?
  authorId      Int?
  responsibleId Int?
  status        status    @default(OPEN)
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
  deletedAt     DateTime?
  email         String
  name          String
  author        User?     @relation("TicketAuthor", fields: [authorId], references: [id])
  responsible   User?     @relation("TicketResponsible", fields: [responsibleId], references: [id])
}

enum status {
  OPEN
  IN_PROGRESS
  DONE
}
